# Design: HPW Skill Improvements

## Architecture Overview
The enhancement introduces a "Goal-Oriented Workflow Recipes" layer (Part 19) into the existing `hematology-paper-writer` skill document. This layer orchestrates the sequential invocation of native HPW drafting capabilities and external specialized skills without modifying the underlying source code of any individual skill.

## Components
- **Literature Integration Layer**: Connects `pubmed-integration` and `literature-review` for corpus generation and PICO-driven article retrieval.
- **Data Synthesis Layer**: Connects `statistical-analysis` for running assumption checks, fixed/random-effect pooling (I²), and primary endpoint calculations on raw data.
- **Verification Layer**: Connects `citation-management` to auto-format PMIDs generated by HPW into final academic outputs (e.g., Vancouver/APA).
- **Core Drafter (HPW)**: Retains its strict PRISMA/CONSORT compliance roles, ingesting the synthesized outputs from the aforementioned layers.

## Data Models
No new programmatic data models are introduced. The "Data" consists of intermediate outputs passed contextually between agents in the chat:
1. PubMed PMIDs list -> Input to Statistical Analysis / HPW
2. Statistical Output (P-values, HR, I²) -> Input to HPW Prose Generation
3. Unformatted Bibliography -> Input to Citation Management

## API Specifications
The integration relies on natural language prompting protocols (agentic handoffs) defined in the recipes:
| Step | Invoked Skill | Action |
|------|---------------|--------|
| Search | `pubmed-integration` | Execute MeSH queries and extract PMIDs. |
| Analyze | `statistical-analysis` | Process CSV/Excel data, return clinical endpoints. |
| Draft | `hematology-paper-writer` | Generate prose strictly citing the prior outputs. |
| Format | `citation-management` | Transform final reference list. |

## Security Considerations
- Ensure patient datasets passed to `statistical-analysis` are anonymized (HIPAA compliance), as data is processed in the chat context.
- Adhere to the "NotebookLM First" rule to prevent hallucination during clinical reviews.

## Testing Strategy
- **Integration Test**: Run a simulated Meta-Analysis workflow providing a mock PICO query to verify smooth transition between the PubMed, Statistical, and Draft phases.
- **Output Quality Check**: Verify the final generated manuscript conforms to the target journal's formatting guidelines using the `citation-management` specifications.
